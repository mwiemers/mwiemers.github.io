<head>
  <link rel="stylesheet" type="text/css" href="/css/stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>

</head>

<body>



<div class="sidenav">
       <a href="##access-to-datasets">Access to Datasets</a>
       <a href="#changing-the-working-directory_section" >Changing the working directory</a>
       <a href="#exercise-changing-the-working-directory">Exercise: Changing the workign directory</a>
       <a href="#loading-data-into-stata">Loading data into Stata</a>
       <a href="#exercise-loading-data">Exercise: Loading data</a>
       <a href="#inspecting-a-dataset">Inspecting a dataset</a>
       <a href="#exercise-inspecting-data">Exercise: Inspecting data</a>
       <a href="#summary-statistics">Summary statistics</a>
       <a href="#exercise-summary-statistics">Exercise: Summary statistics</a>
       <a href="#evaluation">Final task: Please give us your feedback!</a>
</div>
<div class="main">


<h1><a href="#stata-practical-1-importing-and-inspecting-data" id="stata-practical-1-importing-and-inspecting-data">Stata Fundamentals 1: Importing, inspecting and summarizing data</a></h1>

<h2>What is Stata?</h2>
<p>Stata is a general purpose statistical analysis software, similar to SPSS. You can use it to preprocess, analyse and visualise data.</p>
<p>It is mostly used in research and particularly in the fields of economics, political science, and the social sciences in 
	general.</p> 
<p>In Stata you can either use the menus from the graphical user interface or write commands yourself.
	Most Stata users write commands and do not use the user interface. There are many advantages to learning commands. 
	A script can be shared, edited by colleagues and collaborators and made available with publications. By using scripts 
	for your research, you promote transparency and reproducibility. Since writing commands has many advantages and 
	the majority of Stata users write scripts, we will also teach you how to write commands in this workshop series.
</p>
<h2>More information on how the session is run</h2>
<b>What to do when getting stuck</b>:
<ol>
    <li>Ask the trainer if you struggle to find a solution.</li>
    <li>Use the help command. To get help with a specific command type <b>help "command name"</b></li>
    <li>Search online. The statalist.org forum is usually the most useful resource.</li>
</ol>
	   
<b>In this practical session, you will learn to:</b>
<ul>
       <li>change the working directory</li>
       <li>import stata and csv documents</li>
       <li>print an overview of the variables in a dataset</li>
       <li>print a dataset and subsets of the data</li>
       <li>create a summary of continuous variables</li>
</ul>
<br>
<br>
	   
<h2><a href="#access-to-datasets" id="access-to-datasets">Access to Datasets</a></h2>
<p>Please use <a href="https://github.com/mwiemers/mwiemers.github.io/raw/main/dataset/datasets.zip"><b>this link</b></a> 
   to get access to the datasets that you will be using in the exercises</p>
<br>
<br>
<h2><a href="#changing-the-working-directory_section" id="changing-the-working-directory_section">Changing the working directory</a></h2>
<p>When loading a dataset, Stata will always look for the file in the working directory, unless you specify the whole path to the file.</p>
<p>Although you can always specify the whole path to open a file that is not located in the working directory, it makes sense, to change the working directory to where your datasets are located at the beginning of your analysis. This will make it easier to load and switch between different datasets, since you only have to specify the file name and not the whole path to load a dataset.</p>
<br>
<br>
<h3><a href="#printing-the-current-working-directory" id="printing-the-current-working-directory">Printing the current working directory</a></h3>
<p>The working directory is displayed on the bottom of the main Stata window, just below the Command field.</p>
<p>You can also use the <b>pwd</b> command to print the working directory.</p>
<pre><code>. pwd
/Users/michaelwiemers

</code></pre>
<br>
<h3><a href="#changing-the-working-directory" id="changing-the-working-directory">Changing the working directory</a></h3>
<p>You can change the working directory by using the <b>cd</b> command as below. Notice that the path has to be put in quotations.</p>
<pre><code>. cd &quot;/Users/michaelwiemers/OneDrive - London School of Economics/DSL/datasets/&quot;
/Users/michaelwiemers/OneDrive - London School of Economics/DSL/datasets

</code></pre>

<br>
<h3><a href="#exercise-changing-the-working-directory" id="exercise-changing-the-working-directory">Exercise: Changing the working directory</a></h3>
<ol>
	<li>Print the current working directory.</li>
	<li>Change the working directory to where the datasets lfs2017.dta,  
	gapminder.csv and MCS_testscores.dta are located on your computer.</li>
	<li>Print the working directory again to verify that it has been changed.</li>
</ol>
	
<br>
<br>
<h2><a href="#loading-data-into-stata" id="loading-data-into-stata">Loading data into Stata</a></h2>
<p>In this section you will learn how to import Stata datasets (.dta) and flat files, i.e. comma or tab separated value files (.csv or .tsv).</p>
<br>
<h3><a href="#loading-a-dta-file-stata-dataset" id="loading-a-dta-file-stata-dataset">loading a .dta file (Stata dataset)</a></h3>
<p>Now that Stata knows where your datasets are located, we can load a dataset without having to specify the whole path. We can simply refer to the file name.</p>
<p>We are going to load the lfs2017.dta file. This dataset contains data from the labour force survey from 2017. This dataset contains data on a persons age, sex, income, highest qualification and more.</p>
<p>We can load a .dta file, with the <b>use</b> command.</p>
<pre><code>. use lfs2017

</code></pre>
<p>You can see that the variables pane on the right now lists all variables in the lfs2017 dataset.</p>
<img src="screenshots/use_01_mac.png" alt="Stata user interface showing variables in the variables pane after having loaded a dataset">
<br>
<br>
<h3><a href="#loading-a-public-dataset-from-stata-presscom" id="loading-a-public-dataset-from-stata-presscom">Loading a public dataset from stata-press.com</a></h3>
<p>There are a number of datasets in stata format available from the stata-press.com website. You can use this link for a list of all available datasets (unfortunately, without description):</p>
<pre><code>https://www.stata-press.com/data/r15/u.html
</code></pre>
<p>To load the auto dataset from the stata website, we use the <b>webuse</b> command followed by the name of the dataset.</p>
<pre><code>. webuse auto
(1978 Automobile Data)

</code></pre>
<br>
<h3><a href="#loading-a-csv-file" id="loading-a-csv-file">Loading a csv file</a></h3>
<p>We can use the <b>import delimited</b> command to import a csv file. In the example below we are importing the data stored in the gapminder.csv file, which is from the gapminder.org website, and lists unemployment, life expectancy and gdp per capita, for a sample of countries from across the world.</p>
<p>As you can see below, this commad returns an error. This is because we already have a dataset loaded in Stata and the error warns us that by loading the new dataset, unsaved changes to the currently loaded dataset might be lost.</p>
<pre><code>. import delimited &quot;gapminder.csv&quot;
no; data in memory would be lost
r(4);

</code></pre>
<p>We have to first remove the currently loaded dataset with the <b>clear</b> command.</p>
<pre><code>. clear

. import delimited &quot;gapminder.csv&quot;
(15 vars, 427 obs)

</code></pre>
<br>
	   
<p>Alternatively, we can add <i>clear</i> as an option to the <b>import delimited</b> command or any 
	other command to import data.</p>
<pre><code>. import delimited &quot;gapminder.csv&quot;, clear
(15 vars, 427 obs)

</code></pre>
<br>
	   
<h3><a href="#exercise-loading-data" id="exercise-loading-data">Exercise: Loading data</a></h3>
<ol>
	<li>Load the lfs2017 dataset using the <b>use</b> command.</li>
	<li>Load the citytemp.dta dataset from the Stata website.</li>
	<li>Load the csv file gapminder.csv.</li>
	<li>Notice how you can see the variables in the variables pane change everytime 
	you load a different dataset.</li>
</ol>
<br>
<br>
<h2><a href="#inspecting-a-dataset" id="inspecting-a-dataset">Inspecting a dataset</a></h2>
<p>In this section, we will focus on a few commands to inspect a dataset.</p>
<p>We&rsquo;re first going to re-open the lfs2017 dataset.</p>
<pre><code>. use lfs2017, clear

</code></pre>
<br>
<h3><a href="#summary-of-a-dataset" id="summary-of-a-dataset">Summary of a dataset</a></h3>
<p>The <b>describe</b> command produces a summary of a dataset. It lists the total number of observations, variables and the size of the dataset. Apart from the <i>variable name</i> and the <i>variable label</i>, which are also displayed in the Variables pane in the top right in the main Stata window, it also lists the <i>storage type</i>, <i>display format</i> and the <i>value label</i>.</p>
<p>The <i>storage type</i> refers to how the values of a variable are stored in memory. Different storage types can hold different types of information, i.e. numerical or text, and can store information of different size.</p>
<p>The <i>display format</i> refers to how the information is displayed, that is, the number of digits and decimals and the alignment.</p>
<p>The <i>value label</i> refers to the text labels that are being associated to the numerical values in the dataset. The sex variable has the numerical values 1 and 2, but when looking at the data you will see the labels &lsquo;Female&rsquo; and &lsquo;Male&rsquo; displayed. This is because the values 1 and 2 have received the corresponding labels &lsquo;Male&rsquo; and &lsquo;Female&rsquo;.</p>
<pre><code>describe

Contains data from lfs2017.dta
  obs:        10,096                          
 vars:             9                          3 Aug 2020 17:50
 size:       100,960                          
------------------------------------------------------------------------------------------------------------------------
              storage   display    value
variable name   type    format     label      variable label
------------------------------------------------------------------------------------------------------------------------
age             byte    %8.0g      AGE        Age of respondent
durun           byte    %8.0g      DURUN      Duration of unemployment
edage           byte    %8.0g      EDAGE      Age when completed full time education
emplen          byte    %8.0g      EMPLEN     Length of time with current employer
ethnicity       byte    %8.0g      ETHUKEUL   Ethnicity (9 categories) UK level
grosswk         int     %8.0g      GRSSWK     Gross weekly pay in main job (Government scheme or employee)
hiqual          byte    %8.0g      HIQUL15D   Highest qualification (detailed grouping)
sex             byte    %8.0g      SEX        Sex of respondent
degreesub       byte    %8.0g      UNCOMBMA   Undergraduate main subject area
------------------------------------------------------------------------------------------------------------------------
Sorted by: 

</code></pre>
<br>
<h3><a href="#viewing-the-data" id="viewing-the-data">Viewing the data</a></h3>
<p>To display the entire dataset, we use the browse command. This will open the data editor.</p>

<img src="screenshots/browse_01.png">

<h3><a href="#printing-only-a-subset-of-variables" id="printing-only-a-subset-of-variables">Printing only a subset of variables</a></h3>
<p>To only display the observations for a specific variable, type <b>browse</b> followed by the variable name. Here, we are only printing the values for the age variable.</p>
<pre><code>browse age</code></pre>

<img src="screenshots/browse_02.png">
	
<br>
<p>To display a subset of variables, type <b>browse</b> followed by the different variable names separated with a space.</p>
<pre><code>browse age grosswk sex</code></pre>

<img src="screenshots/browse_03.png">
       
<br>
<p>To display a range of variables type <b>browse</b> followed by the first variable, a hyphen and the last variable. The command <b>browse grosswk - degreesub</b> will print the observations for the variables starting from ethnicity till sex in the order as appearing in the dataset from left to right.</p>
<pre><code>browse grosswk - degreesub</code></pre>

<img src="screenshots/browse_04.png">
	
<br>
<br>
<h3><a href="#exercise-inspecting-data" id="exercise-inspecting-data">Exercise: Inspecting data</a></h3>
<ol>
	<li>Open the census5 dataset from the stata website, which has data from 
	the 1980 US census</li>
	<li>Print an overview of the variables.</li>
	<li>View the census datasets.</li>
	<li>Print only the marriage and divorce variables.</li>
</ol>
<br>
<h2><a href="#summary-statistics" id="summary-statistics">Summary statistics</a></h2>
<p>The <strong>summarize</strong> command gives you a number of descriptive statistics like the mean, standard deviation and the minimum and maximum value. We can abbreviate the <strong>summarize</strong> command as <strong>sum</strong>.</p>
<pre><code>sum grosswk

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     grosswk |     10,096    521.7672    522.8757          5      23076

</code></pre>
<br>
<p>You can add the detail option to the command to also display the percentiles, variance, skewness and kurtosis.</p>
<pre><code>sum grosswk, detail

     Gross weekly pay in main job (Government scheme or
                          employee)
-------------------------------------------------------------
      Percentiles      Smallest
 1%           34              5
 5%           90              5
10%          135              5       Obs              10,096
25%          250              5       Sum of Wgt.      10,096

50%          418                      Mean           521.7672
                        Largest       Std. Dev.      522.8757
75%          664          10250
90%          962          13846       Variance         273399
95%         1269          13846       Skewness       13.48147
99%         1923          23076       Kurtosis       448.2789

</code></pre>
<br>
<p>To summarize more than one continuous variable, add all variable names after <strong>sum</strong>.</p>
<pre><code>sum grosswk sex

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     grosswk |     10,096    521.7672    522.8757          5      23076
         sex |     10,096    1.520503    .4996042          1          2

</code></pre>
<h3><a href="#customized-summary-statistics" id="customized-summary-statistics">Customized summary statistics</a></h3>
<p>The <strong>summarize</strong> command although useful to get a quick impression of a variable, doesn&rsquo;t feature any options to select specific descriptives to be displayed in the output. The <strong>tabstat</strong> command allows such customisation of the statistics to be displayed.</p>
<pre><code>tabstat age

    variable |      mean
-------------+----------
         age |  42.37223
------------------------

</code></pre>
<br>

<br>
<h3><a href="#exercise-summary-statistics" id="exercise-summary-statistics">Exercise: Summary statistics</a></h3>
<p>The MCS_testscore dataset contains data from the age 5 sweep from the Millenium Cohort Study, which examined the first year of primary schooling alongside childhood health, childcare, education, social and family circumstances.</p>
<ol>
	<li>Open the MCS_testscore dataset.</li>
	<li>Use <b>summarize</b> to create a table with descriptive 
	statistics for the variables pse to fsptotal.</li>
	<li>Use the <b>tabstat</b> command to create a table for the same 
	variables</li>
	</li>Adjust your <b>tabstat</b> command to list the mean, standard deviation, standard error of the mean, 
	min, max and the 25th and 75th percentile.</li>
	<li>Further adjust you command to ensure that the statistics are displayed in the columns.</li>
</ol>

<br>
<br>
	   
<h3><a href="#evaluation" id="evaluation">Final task: Please give us your feedback! </a></h3>
	   <p>Upon completing the survey, <b>you will receive the link to the solution file</b>, to check how your commands compares to the sample solution.</p>
<p>In order to adapt our training to your needs and provide the most valuable learning experience for you, we depend on your feedack.</p>
	   <p>We would be grateful if you could take 1 min before the end of the workshop to get your feedback! </p>

<a href="https://lse.eu.qualtrics.com/jfe/form/SV_6eSrOVWuit28qcS?coursename=Stata%Fundamentals%1:%Import%and%inspecting%data&topic=Stata&prog=SR&version=23-24&link=https://lsecloud-my.sharepoint.com/:u:/g/personal/m_wiemers_lse_ac_uk/EU9fXeq9Mm9Ii363M_Eypf0B231Lx_NEpTkHgMGnr3SGzw?e=gwTLkK">Click here to open the survey!</a>

<br>
<br>
</div>


	
</body>
